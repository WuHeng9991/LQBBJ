float型的  onewire

DS18B20 --1.初始化

​					2.跳过ROM0xcc

​					3.转换温度0x44

​					4.初始化

​					5.跳过ROM0xcc

​					6.读取暂存器0xbe

​					7.读取温度高，与低

​					8.返回，/16.0

PCE8951

1.开始

2.写PCF8591地址 0x90

![image-20250311211234816](C:\Users\15956\Desktop\笔记大全\2lesson3\图片\image-20250311211234816.png)

3.应答

4.写控制字节0x41（0x4...）...什么都行

5.应答

6.发送DAC数据

7.应答

8.停止



AD

1.传输开始信号

2.写PCF8951地址和模式0x90

3.应答

4.发送选择通道，0x41或者0x43

5.应答

6.开始

7.写PCF8951地址和读模式0x91

8.应答

9.读取电压

10.应答

11.停止

12.返回





超声波

一.初始化

1.发送八个40KHz的方波

二.定时器1计数

三.返回数值





串口设计

##### 1.串口初始化函数

1.波特率配置

注：记得加上EA=1;ES=1;

##### 2.字节发送函数以及字符串发送函数

1.将值赋值给SBUF

2.等待数据发送，若TI=1；则发送完成

注：记得清零TI；



判断是否为/0，若不是则发送

##### 3.串口中断服务函数

1.判断是否为接收数据

2.若为接收，则把数据取走并清零RI；

注：在中断服务函数中进行



sprintf







### 注意！！！！！

串口的时候stc烧入软件要定义频率12MHz







NE555

配置定时器1位定时器模式//16位自动重装载

配置定时器0为计数器模式//16位不自动重装载

TH=0,TL=0



freq 频率 /10000%10

按键长按，双击等等





EEPROM

AT24C02

三个参数，一个是指针数据（往哪页写数据，一页8Bit），一个地址，一个长度

写

{

​	1.起始信号

​	2.选择芯片地址，写模式

​	3.等待应答

​	4.写入要存储的数据地址

​	5.等待应答

​	6.while(长度)

​	{	

​		需要一个一个字节发送信息*String++

​		等待应答

​		延时一会，让芯片有时间处理200us

​		



​	}

停止

}

读



{

​	1.起始信号

​	2.选择芯片地址，写模式

​	3.等待应答

​	4.写入要读取的存储的数据地址

​	5.等待应答

​	6.起始信号

​	7.选择芯片地址，读模式

​	8.等待应答



while(num--)

{

​	*String++=接收一个字节

​	if（num）发送应答

else 发送不应答

}

停止



}

！！！！都没返回值





DS1302

写：

1.写入地址.关闭保护位

2.填数据

3.写入地址，打开保护位



读

1.写入地址.

2.读数据







PWM

用定时器计数，pwm_count

和compare比较





ne555定时器0，串口，超声波（PCA）定时器1，中断定时器2



